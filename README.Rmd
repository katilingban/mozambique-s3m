---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  message = FALSE,
  collapse = TRUE,
  comment = "#>"
)
```

# R workflow for Simple Spatial Surveys Method (S3M) survey in Mozambique

<!-- badges: start -->
[![test S3M workflow](https://github.com/katilingban/mozambique_s3m/actions/workflows/test-s3m-workflow.yaml/badge.svg)](https://github.com/katilingban/mozambique_s3m/actions/workflows/test-s3m-workflow.yaml)
[![check endline data](https://github.com/katilingban/mozambique-s3m/actions/workflows/check-s3m-data.yaml/badge.svg)](https://github.com/katilingban/mozambique-s3m/actions/workflows/check-s3m-data.yaml)
<!-- badges: end -->

This repository is a [`docker`](https://www.docker.com/get-started)-containerised, [`{targets}`](https://docs.ropensci.org/targets/)-based, [`{renv}`](https://rstudio.github.io/renv/articles/renv.html)-enabled [`R`](https://cran.r-project.org/) workflow developed for the design, data management, data analysis, and reporting of the implementation of Simple Spatial Surveys Method (S3M) survey in Mozambique.

## Spatial sample workfow

```{r spatial_sample_workflow, echo = FALSE, message = FALSE, results = 'asis'}
cat(
  "```mermaid",
  targets::tar_mermaid(
    targets_only = TRUE, 
    names = c(
      cidade_da_beira_sp,
      cidade_da_beira_grid,
      sofala_sp_12,
      sofala_grid_12,
      sofala_sample_12,
      selected_ea_complete
    )
  ),
  "```",
  sep = "\n"
)
```

## Food security workflow

```{r food_security_workflow, echo = FALSE, message = FALSE, results = 'asis'}
cat(
  "```mermaid",
  targets::tar_mermaid(
    targets_only = TRUE, 
    names = tidyselect::starts_with(
      c("hdds", "fcs", "rcsi", "wdds", "mddw", "lcsi", "fies", "stock")
    )
  ),
  "```",
  sep = "\n"
)
```

## Mother/carer mental health workflow

```{r mental_health_workflow, echo = FALSE, message = FALSE, results = 'asis'}
cat(
  "```mermaid",
  targets::tar_mermaid(
    targets_only = TRUE, 
    names = tidyselect::starts_with("phq")
  ),
  "```",
  sep = "\n"
)
```

## Childcare practices workflow

```{r childcare_workflow, echo = FALSE, message = FALSE, results = 'asis'}
cat(
  "```mermaid",
  targets::tar_mermaid(
    targets_only = TRUE, 
    names = tidyselect::starts_with("ccare")
  ),
  "```",
  sep = "\n"
)
```

## Child immunisation coverage workflow

```{r immunisation_workflow, echo = FALSE, message = FALSE, results = 'asis'}
cat(
  "```mermaid",
  targets::tar_mermaid(
    targets_only = TRUE, 
    names = tidyselect::starts_with(c("imm", "vas"))
  ),
  "```",
  sep = "\n"
)
```

## Development milestones workflow

```{r development_workflow, echo = FALSE, message = FALSE, results = 'asis'}
cat(
  "```mermaid",
  targets::tar_mermaid(
    targets_only = TRUE, 
    names = tidyselect::starts_with("dev")
  ),
  "```",
  sep = "\n"
)
```

## Pica workflow

```{r pica_workflow, echo = FALSE, message = FALSE, results = 'asis'}
cat(
  "```mermaid",
  targets::tar_mermaid(
    targets_only = TRUE, 
    names = tidyselect::starts_with("pica")
  ),
  "```",
  sep = "\n"
)
```


## Carer characteristics workflow

```{r carer_workflow, echo = FALSE, message = FALSE, results = 'asis'}
cat(
  "```mermaid",
  targets::tar_mermaid(
    targets_only = TRUE, 
    names = tidyselect::starts_with("carer")
  ),
  "```",
  sep = "\n"
)
```

## Child's play workflow

```{r play_workflow, echo = FALSE, message = FALSE, results = 'asis'}
cat(
  "```mermaid",
  targets::tar_mermaid(
    targets_only = TRUE, 
    names = tidyselect::starts_with("play")
  ),
  "```",
  sep = "\n"
)
```

## Childhood illnesses workflow

```{r illness_workflow, echo = FALSE, message = FALSE, results = 'asis'}
cat(
  "```mermaid",
  targets::tar_mermaid(
    targets_only = TRUE, 
    names = tidyselect::starts_with(c("fever", "dia", "rti"))
  ),
  "```",
  sep = "\n"
)
```

## Women's diet workflow

```{r women_diet_workflow, echo = FALSE, message = FALSE, results = 'asis'}
cat(
  "```mermaid",
  targets::tar_mermaid(
    targets_only = TRUE, 
    names = tidyselect::starts_with(c("mddw", "wdds"))
  ),
  "```",
  sep = "\n"
)
```

## Income and occupation workflow

```{r income_workflow, echo = FALSE, message = FALSE, results = 'asis'}
cat(
  "```mermaid",
  targets::tar_mermaid(
    targets_only = TRUE, 
    names = tidyselect::starts_with("work")
  ),
  "```",
  sep = "\n"
)
```

## Women's empowerment and decision-making

```{r wem_workflow, echo = FALSE, message = FALSE, results = 'asis'}
cat(
  "```mermaid",
  targets::tar_mermaid(
    targets_only = TRUE, 
    names = tidyselect::starts_with("wem")
  ),
  "```",
  sep = "\n"
)
```

## Water, sanitation, and hygiene workflow

```{r wash_workflow, echo = FALSE, message = FALSE, results = 'asis'}
cat(
  "```mermaid",
  targets::tar_mermaid(
    targets_only = TRUE, 
    names = tidyselect::starts_with(c("water", "san", "hygiene"))
  ),
  "```",
  sep = "\n"
)
```

## Reproductive health workflow

```{r rh_workflow, echo = FALSE, message = FALSE, results = 'asis'}
cat(
  "```mermaid",
  targets::tar_mermaid(
    targets_only = TRUE, 
    names = tidyselect::starts_with(c("rh", "pmtct", "nc", "preg", "fp"))
  ),
  "```",
  sep = "\n"
)
```

## Authors

* Mark Myatt
* Ernest Guevarra
